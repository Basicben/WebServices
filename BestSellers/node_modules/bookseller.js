
var fs = require('fs');
var dataObj = null;

var getBooksJson = function(){
	var file = './json/bestSellers.json';

	var dataObj = JSON.parse(fs.readFileSync(file, 'utf8'));
	return dataObj;
}

exports.getAllBooks = function(){
	// Get all books from JSON
	if(dataObj == null) dataObj = getBooksJson();
	return dataObj;
}

exports.getBookById = function(bookId){
	// Get Specific book by ID
	if(dataObj == null) dataObj = getBooksJson();
	console.log('Object Length: ' + dataObj.books.length);
	for(var i=0; i<dataObj.books.length;i++){
		if(dataObj.books[i].Id == bookId) {
			console.log("A match found.");
			return dataObj.books[i];
		}
	}
	return null;
}

exports.getBooksByMonth = function(month){
	// Get best sellers books by month
	var dataArray = [];
	if(dataObj == null) dataObj = getBooksJson();
	console.log('Object Length: ' + dataObj.books.length);

	for(var i=0; i<dataObj.books.length;i++){
		if(dataObj.books[i].Month == month) {
			console.log("A match found.");
			dataArray.push(dataObj.books[i]);
		}
	}

	return dataArray;
}